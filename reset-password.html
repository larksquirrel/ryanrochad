<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Reset Password</title>
</head>
<body>
  <h2>Reset Your Password</h2>

  <input type="password" id="new-password" placeholder="New Password">
  <button id="reset-button">Confirm</button>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    const { createClient } = supabase;
    const client = createClient(
      'https://nixlipqiyezzfvwqtdzj.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5peGxpcHFpeWV6emZ2d3F0ZHpqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMTIxODEsImV4cCI6MjA3NzU4ODE4MX0.rZvDmHfMkF5gZM2VWSQuS35LfWL2naJqScVY1Z8g0B4'
    );

    document.getElementById("reset-button").addEventListener("click", async () => {
      const newPassword = document.getElementById("new-password").value;

      const { error } = await client.auth.updateUser({
        password: newPassword
      });

      if (error) alert("修改失败：" + error.message);
      else {
        alert("密码修改成功，请重新登录！");
        window.location.href = "login.html";
      }
    });
  </script>
</body>
</html>
