<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Reset Password - Ryan Rochad</title>
<link rel="icon" href="Ryanrochad.png" type="image/png">

<style type="text/css">
  、
body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
  background-color: #f4f4f4;
}

.container {
  display: flex;
  justify-content: space-between;
  align-items: center;
  min-height: 100vh;
  padding: 0 50px;
}

.left-section {
  background-color: white;
  padding: 20px 40px 80px 40px;
  border-radius: 12px;
  box-shadow: 0 6px 25px rgba(0, 0, 0, 0.08);
  width: 430px;
  position: relative;   /* ←★新增：让子元素的 absolute 以此框为基准 */
}



/* 顶部标题行 */
.header-row {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  margin-bottom: 25px;  /* ← 标题与输入框距离更自然 */
}


.header-row h2 {
  margin: 0;
  font-size: 26px;
  color: #6c5ce7;
  font-weight: 700;
}

.header-row .desc-small {
  font-size: 14px;
  color: #888888;
}

input {
  width: 100%;
  padding: 10px;
  margin-bottom: 15px;
  border: 1px solid #ccc;
  border-radius: 3px;
  box-sizing: border-box;
}


button {
  position: absolute;
  bottom: 25px;
  right: 40px;        /* ← 与 input 完全对齐 */
  width: 120px;
  padding: 10px;
  background-color: #6c5ce7;
  color: white;
  border: none;
  border-radius: 3px;
  cursor: pointer;
  font-size: 16px;
  letter-spacing: 0.3px;
}




button:hover {
  background-color: #5b4ad2;
}

.message {
  display: none;
  margin-top: 18px;
  padding: 12px;
  border-radius: 6px;
  font-size: 15px;
}

.success {
  background-color: #d4edda;
  color: #155724;
  border: 1px solid #c3e6cb;
}

.error {
  background-color: #f8d7da;
  color: #721c24;
  border: 1px solid #f5c6cb;
}

.right-section {
  flex: 1;
  text-align: center;
}

.right-section img {
  max-width: 100%;
  height: auto;
}
  .logo img {
    height: 120px;         /* 调整高度，这里示例为 90px */
  width: auto;          /* 自动保持比例，不会拉伸变形 */
  margin-bottom: 0px; /* Logo 和标题之间的距离 */
  display: block;
}

</style>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>
<div class="container">

  <!-- 左侧重置密码界面 -->
  <div class="left-section">
    <div class="logo">
    <img src="images/37eef08795715baa9746a6829c38d89.png" alt="Ryan Rochad Logo">
  </div>

    <div class="header-row">
      <h2>Reset Your Password</h2>
    </div>

    <input id="new-password" type="password" placeholder="New Password">
    <input id="confirm-password" type="password" placeholder="Confirm Password">

    <button id="reset-button">Reset</button>

    <div id="msg" class="message"></div>
  </div>

  <!-- 右侧图片 -->
  <div class="right-section">
    <img src="images/cc54910e440a2e5c3bc6fcc9b17674a.jpg" alt="">
  </div>

</div>

<script>
const { createClient } = supabase;
const client = createClient(
  "https://nixlipqiyezzfvwqtdzj.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpczMiOiJzdXBhYmFzZSIsInJlZiI6Im5peGxpcHFpeWV6emZ2d3F0ZHpqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMTIxODEsImV4cCI6MjA3NzU4ODE4MX0.rZvDmHfMkF5gZM2VWSQuS35LfWL2naJqScVY1Z8g0B4"
);

const msgBox = document.getElementById("msg");

function showMessage(text, type) {
  msgBox.textContent = text;
  msgBox.className = "message " + type;
  msgBox.style.display = "block";
}

document.getElementById("reset-button").addEventListener("click", async () => {
  const newPassword = document.getElementById("new-password").value.trim();
  const confirmPassword = document.getElementById("confirm-password").value.trim();

  if (!newPassword || !confirmPassword) {
    showMessage("Please fill in both fields.", "error");
    return;
  }

  if (newPassword !== confirmPassword) {
    showMessage("Passwords do not match.", "error");
    return;
  }

  const { data, error } = await client.auth.updateUser({
    password: newPassword
  });

  if (error) {
    showMessage("Error: " + error.message, "error");
  } else {
    showMessage("Password reset successfully! Redirecting...", "success");
    setTimeout(() => {
      window.location.href = "index.html";
    }, 2000);
  }
});
</script>

</body>
</html>

